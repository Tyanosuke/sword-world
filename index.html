<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="icon" href="img/web_icon.png">
  <link rel="stylesheet" href="styles.css" />

  <script src="script_common.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>

  <title>SW2.5 ココフォリア用駒生成ツール</title>
</head>

<body>

  <h1>「ソードワールド2.5」ココフォリア用駒生成ツール ver.0.2.6</h1>

  <!------------------------------------------------------>
  <!-- 対応ルールブック・サプリメント -->
  <!------------------------------------------------------>

  <div class="bookList">

    <div class="bookList_title">
      対応ルールブック・サプリメント
    </div>

    <div class="card_skill">
      <span class="book">Ⅰ</span>
      ルールブックⅠ
    </div>

    <div class="card_skill">
      <span class="book">Ⅱ</span>
      ルールブックⅡ
    </div>

    <div class="card_skill">
      <span class="book">Ⅲ</span>
      ルールブックⅢ
    </div>

    <div class="card_skill">
      <span class="book">ET</span>
      エピックトレジャリー
    </div>

    <div class="card_skill">
      <span class="book">ML</span>
      モンストラスロア
    </div>

    <div class="card_skill">
      <span class="book">BM</span>
      バトルマスタリー
    </div>

  </div>

  <!------------------------------------------------------>
  <!-- 注意 -->
  <!------------------------------------------------------>

  <div class="acordionArea" id="acordion_caution">

    <div class="acordionTitleRow">

      <h3>注意</h3>

      <button onclick='toggleAcordion("acordion_caution")'>開閉</button>

    </div>

    <div class="contents">
      <ul>

        <li>
          <p>
            本ツールは「チャットパレットの編集」に重点を置いて作成されています。
            チャットパレットをどう作るかは個人に大きく依存するため、最終的にはユーザー自身がチャットパレットに手を加えることを前提にしています。
            あくまで面倒な入力作業を省くことが主な機能と考えてください。故に、その他機能はオマケでしかありません。
          </p>
        </li>

        <li>
          <p>
            『解除』判定の＜スカウト用ツール＞未所持時のペナルティ修正など、一部の判定にはアイテム名を使用しています。
            アイテム名は正確に入力してください。「スカウトツール」ではペナルティは消えません。
          </p>
        </li>

        <li>

          <p>
            『ゆとシートⅡ for SW2.5』からデータを読み込んだ際、一部の項目は以下のように取得されます。
          </p>

          <table>
            <tr>
              <th>
                ステータス／防護点
              </th>

              <td>
                防具テーブルの使用技能１行目から取得しています。
              </td>
            </tr>

            <tr>
              <th>
                ステータス／回避力修正
              </th>

              <td>
                各装備の「回避」を集計しています。
              </td>
            </tr>
          </table>

        </li>

        <li>
          <p>
            バグなどあれば<a href="https://takusuki.com/@tyanosuke" target="_blank">こちら</a>（要：Misskeyアカウント）へどうぞ。
          </p>
        </li>

      </ul>
    </div>

  </div>

  <!------------------------------------------------------>
  <!-- キャラクターシート読み込み -->
  <!------------------------------------------------------>

  <div id="area_read">

    <h2>キャラクターシート読み込み</h2>

    <!-- サイト -->
    <div class="row_input">

      <div class="inputLabel">
        サイト
      </div>

      <div>
        <select id="select_site" onchange="selectSite(this)">

          <option id="vampire-blood">キャラクター保管所</option>

          <option id="ytsheet">ゆとシートⅡ for SW2.5</option>

        </select>
      </div>

      <a href="https://charasheet.vampire-blood.net/" target="_blank" class="displayLimit_vampire-blood">
        <button>
          サイトを開く
        </button>
      </a>

      <a href="https://yutorize.2-d.jp/ytsheet/sw2.5/" target="_blank" class="displayLimit_ytsheet hidden">
        <button>
          サイトを開く
        </button>
      </a>

    </div>

    <!-- URL -->
    <div id="loadUrl" class="row_input">

      <div class="inputLabel">
        URL
      </div>

      <div class="displayLimit_vampire-blood">
        <span class="urlPrefix">https://charasheet.vampire-blood.net/</span>
        <input id="input_url_vampire-blood" class="input_url">
        <span class="urlSuffix">.js</span>
      </div>

      <div class="displayLimit_ytsheet hidden">
        <span class="urlPrefix">https://yutorize.2-d.jp/ytsheet/sw2.5/?id=</span>
        <input id="input_url_ytsheet" class="input_url">
        <span class="urlSuffix">&mode=json</span>
      </div>

      <button id="buttonRead" onclick='buttonRead()'>
        読み込み
      </button>

    </div>

    <!-- 読み込み履歴 -->
    <div id="loadLog" class="row_input hidden">

      <div class="inputLabel">
        読み込み履歴
      </div>

      <div class="logList">
      </div>

    </div>

    <!-- 読み込みキャラクター -->
    <div id="loadCharacter" class="row_input hidden">

      <div class="inputLabel">
        読み込みキャラクター
      </div>

      <div>
        <span class="name"></span>
      </div>

      <button id="buttonClear" class="hidden" onclick='buttonClear()'>
        クリア
      </button>

    </div>

    <!-- エラー -->
    <div id="loadError" class="row_input hidden">

      <div class="inputLabel">
        エラー
      </div>

      <div>
        <span class="text_error">読み込みに失敗しました。</span>
      </div>

    </div>

  </div>

  <!------------------------------------------------------>

  <div class="output_area hidden">

    <!-- ステータス -->
    <div>

      <h2>ステータス</h2>

      <!-- プリセット -->
      <div class="row_input buttons_preset">

        <div class="inputLabel">
          プリセット
        </div>

        <button onclick="module.drawStatus(null, 0)">スタンダード</button>

        <button onclick="module.drawStatus(null, 3)">カスタム</button>

        <button onclick="module.drawStatus(null, 4)">戦士系</button>

        <button onclick="module.drawStatus(null, 1)">マギテック</button>

        <button onclick="module.drawStatus(null, 2)">バード</button>

      </div>

      <!-- 入力欄 -->
      <div class="card_status">

        <div class="valueBlock">
          <input class="status_name" class="name">

          <input class="status_value" type="number">

          <span class="slash">/</span>

          <input class="status_max" type="number">

          <button class="button_statusDelete" onclick="statusReset(this)">
            ×
          </button>
        </div>

        <div class="valueBlock">
          <input class="status_name" class="name">

          <input class="status_value" type="number">

          <span class="slash">/</span>

          <input class="status_max" type="number">

          <button class="button_statusDelete" onclick="statusReset(this)">
            ×
          </button>
        </div>

        <div class="valueBlock">
          <input class="status_name" class="name">

          <input class="status_value" type="number">

          <span class="slash">/</span>

          <input class="status_max" type="number">

          <button class="button_statusDelete" onclick="statusReset(this)">
            ×
          </button>
        </div>

        <div class="valueBlock">
          <input class="status_name" class="name">

          <input class="status_value" type="number">

          <span class="slash">/</span>

          <input class="status_max" type="number">

          <button class="button_statusDelete" onclick="statusReset(this)">
            ×
          </button>
        </div>

        <div class="valueBlock">
          <input class="status_name" class="name">

          <input class="status_value" type="number">

          <span class="slash">/</span>

          <input class="status_max" type="number">

          <button class="button_statusDelete" onclick="statusReset(this)">
            ×
          </button>
        </div>

        <div class="valueBlock">
          <input class="status_name" class="name">

          <input class="status_value" type="number">

          <span class="slash">/</span>

          <input class="status_max" type="number">

          <button class="button_statusDelete" onclick="statusReset(this)">
            ×
          </button>
        </div>

        <div class="valueBlock">
          <input class="status_name" class="name">

          <input class="status_value" type="number">

          <span class="slash">/</span>

          <input class="status_max" type="number">

          <button class="button_statusDelete" onclick="statusReset(this)">
            ×
          </button>
        </div>

        <div class="valueBlock">
          <input class="status_name" class="name">

          <input class="status_value" type="number">

          <span class="slash">/</span>

          <input class="status_max" type="number">

          <button class="button_statusDelete" onclick="statusReset(this)">
            ×
          </button>
        </div>

        <div class="valueBlock">
          <input class="status_name" class="name">

          <input class="status_value" type="number">

          <span class="slash">/</span>

          <input class="status_max" type="number">

          <button class="button_statusDelete" onclick="statusReset(this)">
            ×
          </button>
        </div>

        <div class="valueBlock">
          <input class="status_name" class="name">

          <input class="status_value" type="number">

          <span class="slash">/</span>

          <input class="status_max" type="number">

          <button class="button_statusDelete" onclick="statusReset(this)">
            ×
          </button>
        </div>

        <div class="valueBlock">
          <input class="status_name" class="name">

          <input class="status_value" type="number">

          <span class="slash">/</span>

          <input class="status_max" type="number">

          <button class="button_statusDelete" onclick="statusReset(this)">
            ×
          </button>
        </div>

        <div class="valueBlock">
          <input class="status_name" class="name">

          <input class="status_value" type="number">

          <span class="slash">/</span>

          <input class="status_max" type="number">

          <button class="button_statusDelete" onclick="statusReset(this)">
            ×
          </button>
        </div>

        <div class="valueBlock">
          <input class="status_name" class="name">

          <input class="status_value" type="number">

          <span class="slash">/</span>

          <input class="status_max" type="number">

          <button class="button_statusDelete" onclick="statusReset(this)">
            ×
          </button>
        </div>

        <div class="valueBlock">
          <input class="status_name" class="name">

          <input class="status_value" type="number">

          <span class="slash">/</span>

          <input class="status_max" type="number">

          <button class="button_statusDelete" onclick="statusReset(this)">
            ×
          </button>
        </div>

        <div class="valueBlock">
          <input class="status_name" class="name">

          <input class="status_value" type="number">

          <span class="slash">/</span>

          <input class="status_max" type="number">

          <button class="button_statusDelete" onclick="statusReset(this)">
            ×
          </button>
        </div>

        <div class="valueBlock">
          <input class="status_name" class="name">

          <input class="status_value" type="number">

          <span class="slash">/</span>

          <input class="status_max" type="number">

          <button class="button_statusDelete" onclick="statusReset(this)">
            ×
          </button>
        </div>

      </div>

      <div class="area_note">

        <p>
          ※ドラッグ＆ドロップで移動できます。
        </p>

        <p>
          ※背景がグレーのステータスは、盤面キャラクター一覧に表示されません。
        </p>

      </div>

    </div>

    <!-- 行為判定 -->
    <div>

      <h2>行為判定</h2>

      <!-- 『平目』を一括切り替え -->
      <div class="card_skill check_option">

        <input type="checkbox" onchange="toggleFlat(this)" checked>

        <div class="skillName">
          <span class="name">『平目』を一括切り替え</span>
        </div>

      </div>

      <div id="mainContents"></div>

    </div>

    <!-- チャットパレット -->
    <div>

      <h2>チャットパレット</h2>

      <textarea id="text_chatPallet"></textarea>

      <div class="row_input">
        <button onclick="outputChatPallet()">再生成</button>

        <span id="navi_reset" class="navi_text">チャットパレットを再生成しました。</span>
      </div>

    </div>

    <!-- 駒データ生成 -->
    <div>

      <h2>駒データ生成</h2>

      <div class="row_input">
        <button onclick="module.outputCharacter()">生成</button>
        <span id="navi_output" class="navi_text">クリップボードに駒データをコピーしました。</span>
      </div>

    </div>

  </div>

  <!------------------------------------------------------>
  <!-- ローディングカバー -->
  <!------------------------------------------------------>

  <div id="loading" class="hidden">
    <span>Loading...</span>
  </div>

</body>

<!------------------------------------------------------>
<!-- テンプレート -->
<!------------------------------------------------------>

<!-- カテゴリー -->
<template id="temp_category">

  <div class="acordionArea">

    <div class="acordionTitleRow">
      <input type="checkbox" checked class="categoryCheck" onclick="toggleCategoryCheck(this)">
      <h3>（カテゴリー）</h3>
      <button>開閉</button>
    </div>

    <div class="contents">
      <!-- temp_roll -->
    </div>

  </div>

</template>

<!-- 行為判定 -->
<template id="temp_roll">

  <div class="area_roll">

    <div class="categoryTitle">

      <span class="book">（サプリ）</span>

      <span class="rollName">（行為判定）</span>

      <div class="valueBlock bonus">
        <span class="name">（能力値ボーナス）</span>
        <span class="value">0</span>
      </div>

      <div class="valueBlock add">
        <span class="name">（条件付き修正）</span>
        <span class="value">0</span>
      </div>

    </div>

    <div class="rollNote">（備考）</div>

    <div class="skills">
      <!-- temp_skill -->
    </div>

  </div>

</template>

<!-- 武器 -->
<template id="temp_roll_weapon">

  <div class="area_roll weapon">

    <div class="categoryTitle">

      <input type="checkbox">

      <span class="weaponName">（武器名）</span>

      <div class="valueBlock level">
        <span class="name">（技能レベル）</span>
        <span class="value">0</span>
      </div>

    </div>

    <div class="rollNote">（備考）</div>

    <div class="skills">

      <!-- 命中 -->
      <div class="card_skill hit">

        <div class="skillName">
          <span class="name">命中力</span>
        </div>

        <div class="valueBlock bonus">
          <span class="name">（能力値ボーナス）</span>
          <span class="value">0</span>
        </div>

        <div class="valueBlock add">
          <span class="name">修正</span>
          <span class="value">0</span>
        </div>

      </div>

      <!-- ダメージ -->
      <div class="card_skill damage">

        <div class="skillName">
          <span class="name">ダメージ</span>
        </div>

        <div class="valueBlock rate">
          <span class="name">威力</span>
          <span class="value">0</span>
          <span class="add"></span>
        </div>

        <div class="valueBlock critical">
          <span class="name">C値</span>
          <span class="value">0</span>
          <span class="add"></span>
        </div>

        <div class="valueBlock bonus">
          <span class="name">（能力値ボーナス）</span>
          <span class="value">0</span>
        </div>

      </div>

    </div>

  </div>

</template>

<!-- 魔法 -->
<template id="temp_roll_magic">

  <div class="area_roll magic">

    <div class="categoryTitle">

      <span class="magicName">（魔法名）</span>

      <div class="valueBlock rate">
        <span class="name">威力</span>
        <span class="value">0</span>
      </div>

      <div class="valueBlock critical">
        <span class="name">C値</span>
        <span class="value">0</span>
      </div>

      <div class="valueBlock bonus">
        <span class="name">（能力値ボーナス）</span>
        <span class="value">0</span>
      </div>

    </div>

    <div class="skills">
      <!-- temp_skill -->
    </div>

  </div>

</template>

<!-- 技能レベル -->
<template id="temp_skill">

  <div class="card_skill">

    <input type="checkbox">

    <span class="book">（サプリ）</span>

    <div class="skillName">
      <span class="name">（技能）</span>
    </div>

    <div class="valueBlock level">
      <span class="value">0</span>
    </div>

  </div>

</template>

<!-- 読み込み履歴 -->
<template id="temp_log">

  <div class="card_log">

    <button class="button_logLoad" onclick="logLoad(this)">
      （ＰＣ名）
    </button>

    <button class="button_logDelete" onclick="logDelete(this)">
      ×
    </button>

  </div>

</template>

<!------------------------------------------------------>

</html>